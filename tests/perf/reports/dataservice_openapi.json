{
  "openapi": "3.0.3",
  "info": {
    "title": "Scholar DataService API",
    "version": "1.0.0",
    "description": "Centralized data layer for ScholarshipAI ecosystem"
  },
  "servers": [
    {
      "url": "https://scholar-dataservice.replit.app",
      "description": "Production"
    }
  ],
  "paths": {
    "/api/v1/users": {
      "post": {
        "summary": "Create user",
        "security": [{"apiKey": []}],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateUser"}
            }
          }
        },
        "responses": {
          "201": {"description": "User created"}
        }
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "summary": "Get user by ID",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
        ],
        "responses": {
          "200": {"description": "User found"}
        }
      }
    },
    "/api/v1/scholarships": {
      "post": {
        "summary": "Create scholarship",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/CreateScholarship"}
            }
          }
        },
        "responses": {
          "201": {"description": "Scholarship created"}
        }
      }
    },
    "/api/v1/scholarships/search": {
      "get": {
        "summary": "Search scholarships",
        "parameters": [
          {"name": "q", "in": "query", "schema": {"type": "string"}},
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 20}}
        ],
        "responses": {
          "200": {"description": "Search results"}
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check",
        "responses": {
          "200": {"description": "Service healthy"}
        }
      }
    },
    "/readyz": {
      "get": {
        "summary": "Readiness probe",
        "responses": {
          "200": {"description": "Service ready"}
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "apiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    },
    "schemas": {
      "CreateUser": {
        "type": "object",
        "properties": {
          "email": {"type": "string"},
          "name": {"type": "string"},
          "is_ferpa_covered": {"type": "boolean", "default": false}
        },
        "required": ["email"]
      },
      "CreateScholarship": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "organization": {"type": "string"},
          "amount": {"type": "number"},
          "deadline": {"type": "string", "format": "date"}
        },
        "required": ["name", "organization", "amount"]
      }
    }
  }
}
